# Proyecto Backend ‚Äì Ecommerce  
## Backend I + Backend II (CoderHouse)

Este proyecto corresponde a la **continuaci√≥n del ecommerce desarrollado durante el curso Backend I**, el cual fue extendido y mejorado en **Backend II** incorporando un sistema completo de **autenticaci√≥n, autorizaci√≥n y gesti√≥n de usuarios**.

El objetivo principal es integrar **Passport + JWT** al proyecto existente, manteniendo la l√≥gica previa de productos y carritos, y logrando una aplicaci√≥n backend funcional y segura.

---

## üß± Stack Tecnol√≥gico

- Node.js  
- Express  
- MongoDB Atlas  
- Mongoose  
- Handlebars  
- Passport  
  - LocalStrategy (register / login)  
  - JWT Strategy (`current`)  
- bcrypt  
- JSON Web Tokens (JWT)  
- Cookies httpOnly  

---

## üë§ Modelo de Usuario

- `first_name`
- `last_name`
- `email` (√∫nico)
- `age`
- `password` (encriptada con bcrypt)
- `cart` (referencia a `Carts`)
- `role` (valor por defecto: `"user"`)

Las contrase√±as se almacenan **hasheadas** utilizando `bcrypt`.

---

## üîê Autenticaci√≥n y Autorizaci√≥n

### Passport Local
- Registro de usuarios
- Login con validaci√≥n de contrase√±a

### JWT
- En el login se genera un **token JWT**
- El token se guarda en una **cookie httpOnly**
- No se utilizan sesiones de Express

### Estrategia `current`
- Valida al usuario a partir del JWT almacenado en la cookie
- Permite proteger rutas privadas
- Endpoint implementado:


---

## üõí Carritos

- Cada usuario tiene **un carrito propio**
- El carrito se crea autom√°ticamente al registrarse o al iniciar sesi√≥n
- Las rutas de carritos est√°n protegidas con JWT
- Un usuario solo puede modificar **su propio carrito**

---

## üñ•Ô∏è Integraci√≥n Frontend + Backend

El proyecto incluye vistas con **Handlebars** integradas al backend:

- Registro desde la vista
- Login desde la vista
- Navbar din√°mico seg√∫n estado de sesi√≥n
- Agregar productos al carrito solo estando autenticado
- Logout que elimina la cookie JWT




